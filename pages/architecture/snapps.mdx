import Page from "@reason/pages/Docs";
export default Page({ title: "Snapps: SNARK Powered Applications" });

# Snapps: Приложения на базе SNARK

<Alert kind="warning">

  На момент релиза `0.0.16-beta7` эта функция была отключена и может быть использована только при включенном флаге сборки. Мы планируем включить эту функцию в будущих версиях.

</Alert>

### Snapps = Dapps + Конфиденциальность + Офчейн-данные + Масштабируемость

Mina, как самый легкий блокчейн в мире, открывает совершенно новую категорию приложений под названием Snapps <Footnote refNumber="[3]" link="/disclaimers" />: Snark-приложения. Snapps функционально похожи на Dapps, созданные на базе Ethereum, но превосходят их благодаря трем специфическим свойствам:

1. Проверка целостности части данных без раскрытия их содержания.
2. Проверка правильности проведения дорогостоящих операций.
3. Значительные преимущества с точки зрения масштабируемости.

Подобные типы приложений не обязательно являются новыми - в каком-то смысле они существуют в виде современных блокчейнов: например, zCash как Snapp со свойством 1, или Mina в качестве Snapp со свойством 2.

Snapp также значительно эффективнее, чем Dapp на Ethereum. Так, чтобы сеть Ethereum могла предоставить своим пользователям возможность использования Dapp, все ноды и майнеры в сети должны выполнять одинаковые вычисления. Это крайне неэффективно. Snapp на Mina выполняется один раз самим разработчиком, после чего все остальные ноды могут просто проверить связанное с ним доказательство SNARK. Тот же аргумент можно привести и для SNARK, работающих на 2-м уровне Dapps на Ethereum. Однако эти Dapps все еще ограничены в производительности основной цепи, тогда как Snapp на блокчейне Mina выигрывает в потенциале масштабирования благодаря своей компактности.

В целом, Snapp на базе Mina имеет следующий принцип работы:

1. Определение кода для запуска, открытие исходного кода, если он не был открыт до этого
2. Использование кода для развертывания контура SNARK путем функции вызова на Mina
3. Включение источника данных для выполнения операции
4. Вызов функции с соответствующими данными
5. Проведение операции ончейн, аналогично смарт-контракту [будет готово через 6-12 месяцев после запуска основной сети]
6. Прикрепление SNARK-доказательства, вернувшегося от функции на адрес Mina
7. Mina проводит транзакцию на основании SNARK-доказательства


## Технический обзор

В нынешнем виде функционал Snapps от Mina будет работать следующим образом.

- Появится новый вид аккаунтов, называемых "Snapp account", которые, помимо открытого ключа и баланса, будут содержать также верификационную клавишу Pickles SNARK K и статус S, состоящий из небольшого массива элементов поля.
- Появится новый вид транзакций под названием "Однократная Snapp-транзакция". Они позволят осуществлять переводы на стандартный счет и с него, а также обновлять состояние Snapp. Она будет содержать


  - Адрес стандартного счёта
  - Адрес Snapp-счёта
  - Подписываемую сумму "snapp_account_delta", которая представляет собой изменение в балансе Snapp-счета.
  - Опционально предлагаемое новое состояние "snapp_new_state" для Snapp-счета.
  - Если значение "snapp_acount_delta" > 0, то подпись на транзакции производится со стандартного счета
  - Доказательство Pickles SNARK, которое должно быть проверено (с помощью верификационного ключа для счетов Snapp) на основании выписки, включая
    - snapp_account_delta : SignedAmount
    - snapp_prev_state : Array&lt;Field>
    - snapp_new_state : Array&lt;Field>

  Результат применения данной транзакции будет заключаться в обновлении состояния Snapp согласно заданным параметрам, изменении баланса Snapp по команде snapp_acount_delta, и изменении баланса стандартного аккаунта по команде -snapp_account_delta.

- Появится новый вид транзакций под названием "Двойная транзакция Snapp". Это позволит одновременно обновлять состояния на двух счетах Snapp (и переводить средства между ними).
- Она будет содержать

  - Адрес Snapp-счёта "адрес1".
  - Адрес Snapp-счета "адрес2".
  - Подписанную сумму "account1_delta", которая представляет собой изменение остатка на первом счете.
  - Два опционально предлагаемых новых состояния "account1_new_state" и "account2_new_state"
  - Если snapp_acount_delta > 0, то подпись на транзакцию производится со стандартного счета
  - Два Pickles SNARK доказательства "доказательство1", "доказательство2", которые для i = 1, 2 должны быть подтверждены (с помощью верификационного ключа учетной записи) на основании выписки, в том числе
    - account1_delta : SignedAmount
    - account1_prev_state : Array&lt;Field>
    - account1_new_state : Array&lt;Field>
    - account2_prev_state : Array&lt;Field>
    - account2_new_state : Array&lt;Field>

  Итогами такой операции будут: обновление состояния обоих счетов согласно заданным параметрам, изменение баланса счета1 путем добавления параметра - account1_delta, и изменение остатка счета2 путем добавления параметра - account1_delta.

O(1) Labs в настоящее время разрабатывает инструментарий для разработчиков приложений, который включает в себя и уже существующие, такие как [snarky](https://github.com/o1-labs/snarky), что облегчает разработку Snapps, позволяя в один клик вычислить необходимые SNARK-доказательства. Инструментарий будет совместим с встроенным функционалом Mina, обеспечивая Snapps простыми способами получить состояние и увеличить финансовую ценность.

Давайте рассмотрим пару примеров, которые продемонстрируют реальные возможности Snapps.

## Примеры

### Пример 1: Доказательство кредитного рейтинга

**Деловое предложение: **Предоставление заемщикам возможности подтвердить, что их кредитная оценка выше определенного порога, не раскрывая саму оценку, и, таким образом, иметь возможность заимствовать средства без предоставления какого-либо обеспечения.

**Пример User Flow:**

- Пользователь посещает веб-сайт кредитора
- Его просят загрузить информацию с криптографической подписью от поставщика услуг по оценке кредитоспособности, такого как CreditKarma.
- Сайт локально проверяет, превышает ли кредитная оценка пороговое значение, и вычисляет SNARK-доказательство, подтверждающее результат.
- SNARK доказательства и результаты прикрепляются к Mina-адресу пользователя и передаются в облачную систему кредитора (также может быть смарт-контрактом).
- Кредитор проверяет доказательство SNARK и соблюдение порога.
- Займ предоставляется по адресу Мина в стейблкоинах, если он соответствует установленным критериям.

**Как использовать набор инструментов Snapp: **Разработчик Snapp использует набор инструментов для интеграции специальной программы, в которой пользователь загружает подписанную кредитную оценку от поставщика. Затем, локально на компьютере пользователя, проверяется соответствие оценки критериям, и локально генерируется доказательство для проверки, которое передается обратно разработчику. Кроме того, набор инструментов предоставляет пользователю скрытый Mina-адрес, который используется для создания временной метки для расчетов через номер блока на блокчейне Mina. Они также используют этот инструментарий для интеграции верификатора SNARK в свой собственный бэкэнд для подтверждения достоверности локальных вычислений.

### Пример 2: Доказательство подлинности документа, удостоверяющего личность

**Деловое предложение **Доказательство того, что владелец адреса Mina имеет доступ к подлинному документу, удостоверяющему личность (например, водительскому удостоверению), без необходимости открытия самого документа, начиная с определенной высоты блока. Достоверность удостоверяющего личность документа будет проверяться по стандартизированному алгоритму с открытым исходным кодом.

**Пример User Flow:**

- Пользователь посещает сайт, и скачивает приложение на ноутбук или мобильный телефон
- Использует приложение для сканирования ID, чтобы подтвердить его подлинность.
- Приложение также создает кошелек Mina для пользователя
- Приложение сопоставляет доказательство SNARK с адресом пользователя Mina, вместе с хэшем фотографии удостоверения личности
- Пользователь посещает другой веб-сайт, который запрашивает идентификацию личности. Он может поделиться доказательством ID вместе с хэшем своего ID, чтобы доказать, что его адрес Mina претендует на подлинность ID.

**Как использовать набор инструментов Snapp: **Набор инструментов Snapp предоставляет разработчику специальный SDK для встраивания в свое приложение генератора доказательств SNARK и генератора хэшей, наряду с интерфейсом Mina. Инструментарий Snapp также позволяет любому стороннему разработчику проверять данные аутентификации с помощью верификатора SNARK.

### Пример 3: Доказательство баланса на Coinbase

**Деловое предложение: **Предоставление третьим лицам доказательств того, что средства на счете Coinbase, принадлежащем конкретному электронному адресу, соответствуют определенным критериям (например, >\$10,000), без раскрытия фактической суммы депозита.

**Пример User Flow:**

- Пользователь заходит в приложение по кредитованию. Для того, чтобы занять средства, он должен иметь на своем счету в Coinbase не менее >\$10,000 Bitcoin.
- Пользователь заходит на свой аккаунт в Coinbase через протокол OAuths.
- Вебсайт локально проверяет баланс пользователя и электронную почту, оба эти элемента подписаны ключами Coinbase
- Сайт локально генерирует SNARK-доказательство того, что баланс пользователя >\$10,000
- Доказательство SNARK прилагается к адресу пользователя на Mina
- Пользователь подписывает право собственности на доказательство SNARK с помощью своего адреса Mina, а также сообщает адрес электронной почты своей учетной записи Coinbase бэкэнду кредитного приложения.

**How Snapp Toolset Is Used: **Developer of Snapp uses the toolset to integrate a specific program that has the user OAuth into their Coinbase account, query their account balance for a signed balance information, the account’s email address, and a time stamp. The toolset allows a SNARK proof to be generated locally, without sharing any information with the backend of the service provider, so all balance info stays private. The developer also uses the toolset to integrate a SNARK verifier into their own backend to confirm the validity of the local computation.

### Example 4: Private Voting

**Value Proposition:** Allowing a set of eligible voters (e.g. any Twitter account with >100 followers) to vote privately, without disclosing who they are and what they voted for. Anyone would easily be able to verify the outcome of the entire vote once the voting period is over.

**Example User Flow:**

- User can prove ownership of a given account by exhibiting the HTTPS transcript of them successfully logging into twitter.com. To authenticate and vote, they will prove (public input in orange), “I know an account A with password P and a valid login transcript for (A, P) and hash(A, P) = **N** and my vote is for option **V**”. **N** is called a “nullifier” and is unique to a given user/password combination and is used to prevent double voting.
- In a fully decentralized mode, the user can then use this proof to update the state of the election app on the Mina chain.
- In a higher throughput, partially decentralized mode, the user would send their zero knowledge proof to a proof-aggregator, who maintains the state of the election, and aggregates the user proofs together into one bundled together proof, which then gets posted to the Mina chain.
- When viewing the results of the election, the user obtains the main Mina blockchain proof, which certifies the validity of the entire Mina merkle tree, including the leaf corresponding to the election state. They also obtain a merkle path into this leaf so that they can view the state.

### Other Ideas

The design space for Snapps is huge, and will consist of many other innovative ideas entrepreneurs will come up with as the framework is better understood. Some other examples we have thought of:

- Proof of age using identity document
- Proof of citizenship using identity document
- Proof of salary via bank account
- Proof of not doing an activity, e.g. blockchain address associated with a specific identity has not sent money to blacklisted wallet addresses, without disclosing address
- Proof of limited alterations to a document, e.g. resizing a validated photo

## Next Steps and Community Involvement

O(1) Labs is working hard to build the Snapp toolset which will make the above examples possible on the Mina blockchain, and partner with talented developers to build the first proof of concept implementations.

However, the sky's the limit for Snapps. As such, we would like to invite the Mina community to join us in ideating different Snapp use cases and user flows, as well as helping us develop the tools and apps by contributing to the code. If you would like to join the exploration of this entirely new design space for confidential and verifiable applications, start by filling out this [form](https://forms.gle/PsM1AmZMveE3RhaV8).
